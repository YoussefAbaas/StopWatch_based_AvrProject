#include<avr/io.h>
#include<util/delay.h>
#include<avr/interrupt.h>
unsigned int seconds=0;
unsigned int minutes=0;
unsigned int hours=0;
void Timer1_Compare_Mode(unsigned int ticks)
{
	TCCR1A|=(1<<FOC1A);
	TCCR1B|=(1<<WGM12)|(1<<CS10)|(1<<CS12); // enable compare mode with prescaler Fcpu/1024
	TCNT1=0;  //
	OCR1A=ticks;
	TIMSK|=(1<<OCIE1A); // enable interrupt flag for timer 1 compare mode A
}
ISR(TIMER1_COMPA_vect)
{
	seconds++;
	if(seconds==60)
	{
		minutes++;
		seconds=0;
	}
	if(minutes==60)
	{
		hours++;
		minutes=0;
	}

}
int main(void)
{
	DDRC|=0x0f; // first 4 pins in port c are outputs
	PORTC&=0xf0; //initialize first 4 pins in port c with zero
	DDRA&=0x60; // first six pins in port a are inputs
	SREG|=(1<<7);
	Timer1_Compare_Mode(977);
	while(1)
	{

		for(int i=0;i<6;i++)
		{
			PORTA|=(1<<i);
			PORTC=4;
			//PORTA = (PORTA & 0xC0) | (0x3F & (1<<i));

			if(i==0)
			{
				//PORTC=seconds%10;
				PORTC=4;
			}
			else if(i==1)
			{
				//PORTC=seconds/10;
				PORTC=4;
			}
			else if(i==2)
			{
				//PORTC=minutes%10;
				PORTC=4;
			}
			else if(i==3)
			{
				//PORTC=minutes/10;
				PORTC=4;
			}
			else if(i==4)
			{
				//PORTC=hours%10;
				PORTC=4;
			}
			else if(i==5)
			{
				//PORTC=hours/10;
				PORTC=4;
			}

		}

		_delay_ms(5);


	}
}
